# 전역 변수의 문제점

## 변수의 생명주기

변수는 생명주기를 가진다. 변수는 자신이 생성된 위치에서 선언되고, 소멸한다.

전역변수는 그 생명 주기를 프로그램과 같이한다.

함수 내부에 선언된 지역변수의 생명 주기는 함수와 같이한다.

호이스팅(변수의 선언이 코드의 실행 이전에 이루어지는 것)은 스코프 단위에서 일어난다.

`var`키워드로 선언된 전역 변수는 전역 객체의 생명 주기와 같이한다.

```javascript
var x = "global";

function h() {
  console.log("x", x); // undefined 스코프 단위로 호이스팅이 일어나면서 함수 내 선언된 x 참조
  var x = "local";
}
h();
console.log("x", x); // "global"
```

## 전역변수의 문제점

### 암묵적 결합

전역 변수는 코드의 모든 곳에서 참조하고 사용하겠다는, 암묵적 결합의 의도를 가진다. 변수의 유효범위가 크면 클수록 유지보수성과 무결성에 해가된다.

### 긴 생명 주기

프로그램의 생명 주기와 함께하는 만큼 긴 생명 주기를 가지며 따라서 메모리 자원을 가장 오래 소비한다.

### 스코프 체인 상 종점에 위치

스코프 체인 검색 과정의 가장 끝에 존재하기에 가장 검색속도가 느리다.

### 네임스페이스 오염

파일이 분리되어 있어도 네임스페이스를 공유하는 자바스크립트의 특성상 전역 변수의 식별자가 네임스페이스를 점유하게 되어 예기치 못한 문제를 일으킬 수 있다.

## 억제하자

### 즉시실행함수

당연히 내부 변수는 지역 변수가 되며, 즉시 실행되고 파괴되어 주기를 통제하기 쉬운 즉시실행함수를 사용한다.

### 네임스페이스 객체

전역에 네임스페이스 객체를 선언하고 이 객체에 프로퍼티로 추가하는 방법이다.

### 모듈패턴

클래스를 모방해 관련있는 변수와 함수를 즉시실행함수로 묶어 관리한다. 자바스크립트의 클로저 기능을 활용하는 방법이다.

### ES6 모듈

ES6 모듈은 전역 객체를 스코프로 가지지 않고, 각각 개별의 모듈 스코프를 제공한다.
